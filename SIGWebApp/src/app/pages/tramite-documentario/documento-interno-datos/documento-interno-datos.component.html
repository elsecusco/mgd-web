<form [formGroup]="form"
      (ngSubmit)="saveDoc()"
      #f="ngForm"
      novalidate
      class="wd-100"
      fxLayout="column"
      fxLayoutGap="8px">
    <loading-sp [loading]="saving"></loading-sp>
    <mat-progress-bar *ngIf="loading"
                      mode="indeterminate">
    </mat-progress-bar>
    <span class="fs-16 fw-500 mg-bot-8">Datos Documento Interno</span>
    <row-container>
    <mat-form-field fxFlex="25"
                    fxFlex.xs="auto"
                    class="mg-bot-8"
                    appearance="outline"
                    color="primary">
        <mat-label>Numero del Documento</mat-label>
        <input matInput
               formControlName="codigoDocumentoInterno"
               autocomplete="off"
               readonly
               type="text">
    </mat-form-field>
    <mat-form-field fxFlex="25"
            fxFlex.xs="auto"
            class="mg-bot-8"
            appearance="outline"
            color="primary">
        <mat-label>Tipo de Documento</mat-label>
        <mat-select formControlName="codigoTipoDocumento">
            <mat-option *ngFor="let t of tipos.tiposDocumentoInterno"
                [value]="t.codigo">
                {{t.nombre}}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <mat-form-field fxFlex="25"
                        fxFlex.xs="auto"
                        appearance="outline"
                        class="mg-bot-8"
                        color="primary">
            <mat-label>Recepci√≥n</mat-label>
            <mat-select formControlName="codigoTipoRecepcion">
                <mat-option *ngFor="let t of tipos.tiposRecepcion"
                            [value]="t.codigo">                           
                    {{t.nombre}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field fxFlex="30"
                        appearance="outline"
                        class="mg-bot-8"
                        color="primary">
            <mat-label>Fecha Documento</mat-label>
                        <input matInput
                                formControlName="fechaDocumento"
                                readonly
                                [matDatepicker]="dp1">
        <mat-datepicker-toggle matSuffix
                               [for]="dp1"></mat-datepicker-toggle>
        <mat-datepicker #dp1
                        [disabled]="form.get('codigoDocumentoInterno').disabled"></mat-datepicker>
        </mat-form-field>
    </row-container>
    <row-container>
        <mat-form-field fxFlex="25"
                        fxFlex.xs="auto"
                        appearance="outline"
                        class="mg-bot-8"
                        color="primary">
            <mat-label>Nro Expediente</mat-label>
            <input matInput
                   formControlName="numeroExpediente"
                   placeholder="Ingrese Nro Expediente"
                   autocomplete="off"
                   type="text">
        </mat-form-field>    
        <div fxFlex="27"
             fxFlex.xs="auto"
             fxLayout="row"
             fxLayoutAlign="end center"
             fxLayoutGap="4px"
             class="mg-bot-8">
            <mat-checkbox #chkVencimiento
                          formControlName="tieneVencimiento"></mat-checkbox>
            <mat-form-field appearance="outline"
                            color="primary">
                <mat-label>Fecha Vencimiento</mat-label>
                <input matInput
                       readonly
                       (blur)="onBlur('fechaVencimiento')"
                       [matDatepicker]="dpVencimiento"
                       formControlName="fechaVencimiento">
                <mat-datepicker-toggle matSuffix
                                       [for]="dpVencimiento"></mat-datepicker-toggle>
                <mat-datepicker #dpVencimiento
                                [disabled]="!chkVencimiento.checked"></mat-datepicker>
            </mat-form-field>
        </div>
        <mat-form-field fxFlex="25"
                        fxFlex.xs="auto"
                        appearance="outline"
                        class="mg-bot-8"
                        color="primary">
            <mat-label>Tipo Correlativo</mat-label>
            <mat-select formControlName="codigoTipoCorrelativo">
                <mat-option *ngFor="let t of tipos.tiposCorrelativos"
                            [value]="t.codigo">                           
                    {{t.nombre}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </row-container>

    <mat-form-field appearance="outline"
                    color="primary">
        <mat-label>Asunto</mat-label>
        <textarea matInput
                  formControlName="contenidoDocumento"
                  rows="2"></textarea>
    </mat-form-field>
    <div *ngIf="form.get('codigoDocumentoInterno').enabled"
         fxLayout="row"
         fxLayoutAlign="end center">
        <button fxFlex="20"
                fxFlex.xs=""
                type="submit"
                mat-raised-button
                [disabled]="!form.valid"
                color="primary">GUARDAR DOCUMENTO <mat-icon>save</mat-icon>
        </button>
    </div>
</form>


